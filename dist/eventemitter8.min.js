!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.eventemitter8=t()}(this,function(){"use strict";var e=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},t=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),n=Object.prototype.toString,r=function(e){return Array.isArray(e)||"array"===function(e){return n.call(e).slice(8,-1).toLowerCase()}(e)},i=function(e){return null===e||void 0===e},s=function(e,t,n,s){if("function"!=typeof t)throw new TypeError("fn must be a function");t.context=n,t.once=!!s;var u=this._events[e];return i(u)?this._events[e]=t:"function"==typeof u?this._events[e]=[u,t]:r(u)&&this._events[e].push(t),this};return function(){function n(){e(this,n),void 0===this._events&&(this._events=Object.create(null))}return t(n,[{key:"addListener",value:function(e,t,n){return s.call(this,e,t,n)}},{key:"on",value:function(e,t,n){return this.addListener(e,t,n)}},{key:"once",value:function(e,t,n){return s.call(this,e,t,n,!0)}},{key:"emit",value:function(e){for(var t=this,n=arguments.length,s=Array(n>1?n-1:0),u=1;u<n;u++)s[u-1]=arguments[u];if(i(e))throw new Error("emit must receive at lease one argument");var o=this._events[e];return!i(o)&&("function"==typeof o?(o.call(o.context||null,s),o.once&&this.removeListener(e,o)):r(o)&&o.map(function(n){n.call(n.context||null,s),n.once&&t.removeListener(e,n)}),!0)}},{key:"removeListener",value:function(e,t){if(i(this._events))return this;if(i(e))return this;if("function"!=typeof t)throw new Error("fn must be a function");var n=this._events[e];if("function"==typeof n)n===t&&delete this._events[e];else{var r=n.findIndex(function(e){return e===t});if(-1===r)return this;0===r?n.shift():n.splice(r,1),1===n.length&&(this._events[e]=n[0])}return this}},{key:"removeAllListeners",value:function(e){if(i(this._events))return this;i(e)&&(this._events=Object.create(null));var t=this._events[e];return i(t)||(1===Object.keys(this._events).length?this._events=Object.create(null):delete this._events[e]),this}},{key:"listeners",value:function(e){if(i(this._events))return[];var t=this._events[e];return i(t)?[]:"function"==typeof t?[t]:t.map(function(e){return e})}},{key:"listenerCount",value:function(e){if(i(this._events))return 0;var t=this._events[e];return i(t)?0:"function"==typeof t?1:t.length}},{key:"eventNames",value:function(){return i(this._events)?[]:Object.keys(this._events)}}]),n}()});
